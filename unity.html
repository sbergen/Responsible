<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Responsible in Unity | Responsible </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Responsible in Unity | Responsible ">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="index.html" title="Home">Home</a>
                      </li>
                      <li>
                          <a href="dotnet.html" title=".NET">.NET</a>
                      </li>
                      <li>
                          <a href="unity.html" title="Unity">Unity</a>
                      </li>
                      <li>
                          <a href="design.html" title="Design Overview">Design Overview</a>
                      </li>
                      <li>
                          <a href="api/Responsible.html" title="API Documentation">API Documentation</a>
                      </li>
                      <li>
                          <a href="CHANGELOG.html" title="Changelog">Changelog</a>
                      </li>
                      <li>
                          <a href="https://github.com/sbergen/Responsible" title="GitHub">GitHub</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="responsible-in-unity">Responsible in Unity</h1>

<h2 id="supported-unity-versions">Supported Unity versions</h2>
<ul>
<li>2019, 2020: Fully supported. CI is periodically updated to run on the latest releases,
but might lag behind a bit. Please report any issues you find.</li>
<li>2021: There was a change in <code>async/await</code> behavior around Unity 2021.3,
which subtly changes the execution timing of canceled tasks.
This now works differently from both standard .NET runtimes and earlier Unity versions.
I'm looking into changing my testing strategy to ensure proper functionality in 2021,
but at the moment there might be subtle bugs caused by this issue.
Please report any issues you find.</li>
<li>No TECH stream releases are tested, but feel free to report issues you find, and they might get fixed.
However, ensuring correct functionality on 2021 is a higher priority right now.</li>
</ul>
<h2 id="overview">Overview</h2>
<p>Responsible was originally written for Unity,
and only later ported to .NET standard,
so there are many things already set up for getting started.</p>
<p>To start using Responsible, you'll need to</p>
<ul>
<li>install the package,</li>
<li>reference the <code>Responsible</code> assembly from your test assemblies, and</li>
<li>set up your tests using <a class="xref" href="api/Responsible.Unity.UnityTestInstructionExecutor.html"><code>UnityTestInstructionExecutor</code></a>.</li>
</ul>
<h2 id="installation">Installation</h2>
<p><a href="https://openupm.com/">OpenUMP</a> is the recommended way of installing Responsible in Unity.</p>
<h3 id="using-openupm">Using OpenUPM</h3>
<p>After <a href="https://openupm.com/docs/">setting up OpenUMP</a>,
you can add Responsible to your project by running</p>
<pre><code>openupm add com.beatwaves.responsible
</code></pre>
<h3 id="direct-unity-package-manager-reference">Direct Unity Package Manager Reference</h3>
<p>Select the version you want to use from
<a href="https://github.com/sbergen/Responsible/releases">releases</a>,
and add the following to <code>Packages/manifest.json</code></p>
<pre><code class="lang-json">&quot;com.beatwaves.responsible&quot;: &quot;https://github.com/sbergen/Responsible.git?path=/com.beatwaves.responsible#vX.Y.Z&quot;
</code></pre>
<p>replacing <code>X.Y.Z</code> with the version you want to use.</p>
<h3 id="without-the-package-manager">Without the Package Manager</h3>
<p>If you can't or don't want to use the package manager, you can also directly incorporate
the <a href="https://github.com/sbergen/responsible/tree/main/com.beatwaves.responsible">com.beatwaves.responsible</a> directory into your project.
This could be done manually, or e.g. with a symlink and git submodule.</p>
<h2 id="referencing-the-assembly">Referencing the Assembly</h2>
<p>With either installation option, you'll end up with an assembly called <code>Responsible</code>,
with the <code>UNITY_INCLUDE_TESTS</code> define constraint.
To use Responsible, simply reference this from your test assemblies.</p>
<h2 id="examples">Examples</h2>
<p>For a simple example of a basic test setup,
there's an <a href="https://github.com/sbergen/responsible/tree/main/com.beatwaves.responsible/Samples%7E/ResponsibleGame">example project</a>
with some <a href="https://github.com/sbergen/responsible/tree/main/com.beatwaves.responsible/Samples%7E/ResponsibleGame/PlayModeTests">basic tests</a> included.
This sample game can be installed from the Unity Package Manager,
and is also symlinked into the main Unity project in this repository, for convenience.</p>
<p>The library itself also has extensive test coverage,
which may be used as more extensive examples of usage.
Note that these tests live outside of the package,
so that they do not get included into projects referencing Responsible.
(This has to do with undocumented reasons related to using <code>&quot;type&quot;: &quot;tests&quot;</code> in <code>package.json</code>).</p>
<h2 id="unity-error-log-handling">Unity Error Log Handling</h2>
<p>The Unity Tests Runner will fail tests on logged errors.
While running a test instruction, Responsible will intercept this process,
by listening to logged errors, and overriding the default behavior.
The following points are worth noting:</p>
<ul>
<li>If you are expecting an error, you must call
<a class="xref" href="api/Responsible.Unity.UnityTestInstructionExecutor.html#Responsible_Unity_UnityTestInstructionExecutor_ExpectLog_UnityEngine_LogType_System_Text_RegularExpressions_Regex_"><code>UnityTestInstructionExecutor.ExpectLog</code></a>
instead of only calling <code>UnityEngine.LogAssert.Expect</code>.</li>
<li>Logging errors from any other thread but the main thread should <em>mostly</em> be handled,
but might be slightly unreliable depending on timing.
As test instructions are executed on the main thread,
it's impossible to always attribute a logged error to the correct test instruction.</li>
<li><code>LogAssert.ignoreFailingMessages</code> is respected at the time of logging.</li>
</ul>
<h2 id="test-operation-state-editor-window">Test Operation State Editor Window</h2>
<p>By using the Editor window available under <code>Window -&gt; Responsible -&gt; Operation State</code>,
you can observe the progress of your tests executing.
The contents of the window updates in real time and matches the output produced on failures,
except for the operation stack and stack trace.</p>
<img src="images/UnityStateWindow.png" srcset="images/UnityStateWindow.png 2x" alt="Screenshot of Unity Operation State Window">
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
